document.querySelector(".calculator__clean").addEventListener("click",cleanCalculator),document.querySelector(".calculator__delete").addEventListener("click",removeLastElem),document.querySelector(".calculator__total").addEventListener("click",calculateTotal);const calculatorButtons=document.querySelectorAll(".calculator__buttons .calculator__btn"),numbers=document.querySelectorAll(".calculator__buttons .calculator__number"),operators=document.querySelectorAll(".calculator__buttons .calculator__operator"),output=document.querySelector(".calculator__screen-output"),dotBtn=document.querySelector(".calculator__dot"),dotClick=document.querySelector(".calculator__dot").addEventListener("click",dotClicked);let numberStr="",mainStr="",mainArr=[],numberFlag=!1,operatorFlag=!1,dotFlag=!1;for(let r=0;r<calculatorButtons.length;r++){function calculatorButtonsActive(){this.classList.add("calculator__btn_active"),setTimeout(()=>{this.classList.remove("calculator__btn_active")},350)}calculatorButtons[r].addEventListener("mousedown",calculatorButtonsActive)}function dotClicked(){dotBtn.setAttribute("disabled","")}function numberClick(){for(let r=0;r<numbers.length;r++)numbers[r].addEventListener("click",numberAction);for(let r=0;r<operators.length;r++)operators[r].addEventListener("click",operatorAction)}function numberAction(){!1===numberFlag?(operatorFlag=!1,mainArr.push(this.value),console.log(mainArr),numberFlag=!0,mainStr=mainArr.join(""),output.value=mainStr):(mainArr[mainArr.length-1]+=this.value,mainStr=mainArr.join(""),output.value=mainStr,console.log(mainArr))}function operatorAction(){mainArr.length%2!=0?(numberFlag=!1,operatorFlag=!0,mainArr.push(this.value),console.log(mainArr),mainStr=mainArr.join(""),output.value=mainStr,dotBtn.removeAttribute("disabled","")):(mainArr.pop(),mainArr.push(this.value),console.log(this.value),console.log(mainArr),mainStr=mainArr.join(""),output.value=mainStr,dotBtn.removeAttribute("disabled",""))}function cleanCalculator(){numberStr="",mainStr="",mainArr=[],numberFlag=!1,operatorFlag=!1,dotFlag=!1,output.value=mainStr}function removeLastElem(){mainArr.pop(),numberFlag=!1,operatorFlag=!1,mainStr=mainArr.join(""),output.value=mainStr,console.log(mainArr)}function calculateTotal(){if(mainArr.length%2!=0){for(i=0;i<mainArr.length;i++)"*"!==mainArr[i]&&"/"!==mainArr[i]||("*"===mainArr[i]?(a=mainArr[mainArr.indexOf(mainArr[i])-1],b=mainArr[mainArr.indexOf(mainArr[i])+1],mainArr[mainArr.indexOf(mainArr[i])-1]=a*b,mainArr.splice(mainArr.indexOf(mainArr[i])+1,1),mainArr.splice(mainArr.indexOf(mainArr[i]),1),console.log(mainArr)):(a=mainArr[mainArr.indexOf(mainArr[i])-1],b=mainArr[mainArr.indexOf(mainArr[i])+1],mainArr[mainArr.indexOf(mainArr[i])-1]=a/b,mainArr.splice(mainArr.indexOf(mainArr[i])+1,1),mainArr.splice(mainArr.indexOf(mainArr[i]),1),console.log(mainArr)));mainStr=mainArr.join(""),mainArr=[],mainArr.push(eval(mainStr)),mainStr=mainArr.join(""),output.value=mainStr,console.log(eval(mainArr)),console.log(eval(mainStr))}else alert("The example is not complete")}numberClick();